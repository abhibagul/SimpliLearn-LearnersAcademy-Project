<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Schedule Session</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">

<link href="dashboard.css" rel="stylesheet">
</head>
<body class="bg-light">
	<%@page import="java.sql.DriverManager"%>
	<%@page import="java.sql.ResultSet"%>
	<%@page import="java.sql.Statement"%>
	<%@page import="java.sql.Connection"%>
	<%
		String session_u_name = (String)session.getAttribute("usname");
		String role = (String)session.getAttribute("role");	
	
		if(role != "admin"){
			response.sendRedirect(request.getContextPath() + "/admin.jsp");
			
		}
		
		String driverName = "com.mysql.jdbc.Driver";
		String connectionUrl = "jdbc:mysql://localhost:3306/";
		String dbName = "learnersacademy";
		String userId = "root";
		String password = "root12345";
		
		String action = (String)request.getParameter("action");

		
	%>



	
	
<main>
	<jsp:include page="sidebarComp.jsp"/>

	<div class="data">
	
	<jsp:include page="headerComp.jsp"/>
  
	
	<div class="p-3 control">

	<h3> <i class="bi bi-person-video2"></i> Schedule Session</h3>
	

	<%
	
	String sesName = "";
	String sesDate = "";
	String sesStart = "";
	String sesEnd = "";
	
	if(request.getParameter("action") != null && action.equals("creation")){
		
		if(request.getParameter("status") != null && request.getParameter("status").equals("1")){
			%>
			<div class="alert alert-success" role="alert">
			 Class Created successfully!
			</div>
						
			<%
		}else if(request.getParameter("status") != null && request.getParameter("status").equals("0")){
			%>
			<div class="alert alert-danger" role="alert">
			 Unable to create the class, Try again!
			</div>
						
			<%
			
		}
		
	}
	
	if(request.getParameter("sesName") != null){
		sesName = request.getParameter("sesName");
	}
	
	if(request.getParameter("sesDate") != null){
		sesDate = request.getParameter("sesDate");
	}
	
	if(request.getParameter("sesStart") != null){
		sesStart = request.getParameter("sesStart");
	}
	
	if(request.getParameter("sesEnd") != null){
		sesStart = request.getParameter("sesEnd");
	}
	
	%>

	<div class="my-3 p-3 bg-body rounded shadow-sm">
	
	
		<%
		
		if(request.getParameter("step") != null){
			if(request.getParameter("step").equals("1")){
				%><h1> Step 1</h1>
				<%
			}
		}else{
		
		%>
	
		<form method="post" action="<%= request.getContextPath() %>/createClass">
		
		<input type="hidden" name="action" value="createSession">
		<input type="hidden" name="step" value="1">
		
		<div class=" g-3 mb-3 align-items-center">
		  <div class="col-5">
		    <label for="sesName" class="col-form-label">Session Name</label>
		  </div>
		  <div class="col-auto">
		    <input type="text" id="sesName" name="sesName" value="<%= sesName %>" required class="form-control" aria-describedby="Session Name">
		  </div>
		</div>
		
		
		<div class=" g-3 mb-3 align-items-center">
		  <div class="col-5">
		    <label for="sesDate" class="col-form-label">Session Date</label>
		  </div>
		  <div class="col-auto">
		    <input type="date" id="sesDate" name="sesDate" value="<%= sesDate %>" required class="form-control" aria-describedby="session Date">
		  </div>
		</div>
		
		<div class=" g-3 mb-3 align-items-center">
		  <div class="col-5">
		    <label for="sesStart" class="col-form-label">Session Start Time</label>
		  </div>
		  <div class="col-auto">
		    <input type="time"  onchange="updateEndTime()" id="sesStart" name="sesStart" value="<%= sesStart %>" required class="form-control" aria-describedby="sesStart">
		  </div>
		</div>
		
		<div class=" g-3 mb-3 align-items-center">
		  <div class="col-5">
		    <label for="sesEnd" class="col-form-label">Session End Time</label>
		  </div>
		  <div class="col-auto">
		    <input type="time" id="sesEnd" name="sesEnd" value="<%= sesEnd %>" required class="form-control" aria-describedby="sesEnd">
		  </div>
		</div>
		
		<input class="btn btn-primary" type="submit" value="Next">
		<input class="btn btn-light" type="reset" value="Reset">
		
		
		</form>
		
		<%
		}
		%>

	</div><!-- white card -->
	
	


	</div>
	<!-- /main content -->
	</div>
	
	</main>
	
	<script>
	function updateEndTime()(){
		let st = document.getElementById('sesStart').value;
		document.getElementById("sesEnd").min = st;
	}
	
	</script>


</body>
</html>